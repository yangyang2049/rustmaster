# 变更日志

## [未发布]

### 新增 (Added)
- **章节进度实时更新**：从章节详情页返回到首页标签页时，实时更新章节进度
  - 在 `Index`（@Entry 组件）中添加 `onPageShow` 生命周期方法，当从其他页面返回时触发刷新
  - 在 `Index` 中添加 `learnPageRefreshTrigger` 状态，用于触发 LearnPage 刷新
  - 在 `LearnPage` 中添加 `@Prop refreshTrigger` 和 `@Watch` 监听，当触发器变化时自动重新加载章节进度
  - 当切换回 LEARN 标签页时，自动触发进度更新
  - 确保用户从章节详情页返回时，能立即看到最新的学习进度（勾选标记），无需切换标签页

- **章节导航功能**：在章节详情页底部添加了前一章和后一章的导航按钮
  - 实现了 `getAllChaptersSorted` 方法，按照单元顺序和章节ID顺序获取所有章节
  - 实现了 `getPreviousChapter` 和 `getNextChapter` 方法，获取当前章节的前一章和后一章
  - 实现了 `isFirstChapter` 和 `isLastChapter` 方法，判断当前章节是否为第一章或最后一章
  - 实现了 `navigateToChapter` 方法，**直接在当前页面加载新章节内容**，而不是推入新页面，保持页面栈简洁
  - 添加了 `Scroller` 控制器，切换章节时自动滚动到页面顶部
  - 切换章节时自动标记新章节为已读，并检查收藏状态
  - 在章节内容底部添加了导航按钮区域，显示前一章和后一章的标题
  - 前一章按钮使用卡片样式，后一章按钮使用主色背景突出显示
  - **特殊处理边界情况**：第一章时前一章按钮显示但禁用，显示"已是第一章"提示；最后一章时后一章按钮显示但禁用，显示"已是最后一章"提示
  - 按钮始终显示，保持布局平衡，提升用户体验
  - 提升了学习体验，让用户可以顺畅地在章节间切换

### 修复 (Fixed)
- **颜色模式应用时机优化**：优化了 EntryAbility 中颜色模式的应用逻辑
  - 添加 `currentColorMode` 变量跟踪当前已应用的颜色模式
  - 在 `loadAndApplyColorMode` 中添加检查，避免重复设置相同的颜色模式
  - 优化 `onWindowStageCreate` 中的调用逻辑，仅在必要时作为备用方案应用
  - 改进日志输出，更清晰地显示调用时机和跳过原因
  - 提升了性能，避免了不必要的重复调用

- **LearningResourcesPage URL复制功能**：为学习资源对话框添加了URL复制功能
  - 添加 `copyUrlToClipboard` 方法，实现URL复制到剪贴板
  - 在URL旁边添加复制图标按钮，用户可一键复制URL
  - URL文本支持多行显示和省略，长URL自动换行
  - 添加Toast提示，复制成功或失败都有明确反馈
  - 优化UI布局，URL区域添加背景色和圆角，提升视觉效果

- **MarkdownRenderer 链接点击功能**：为Markdown渲染器添加了链接点击处理功能
  - 实现 `handleLinkClick` 方法，点击链接时显示操作菜单
  - 用户可以选择"打开链接"或"复制链接"
  - 实现 `openUrl` 方法，使用 Want 和 startAbility 打开外部链接
  - 实现 `copyUrlToClipboard` 方法，复制URL到剪贴板
  - 添加错误处理：如果打开链接失败，自动复制URL并提示用户
  - 添加容错机制：如果没有 context，只提供复制功能
  - 所有操作都有明确的Toast提示，提升用户体验

- **章节内容增强**：为所有章节添加了更详细的解释性段落文本
  - 为变量与可变性章节添加了不可变性的原因和使用场景说明
  - 为所有权章节添加了详细的工作原理和规则解释
  - 为结构体、枚举、数据类型等基础章节补充了概念说明和使用场景
  - 为函数、控制流、循环章节添加了详细的使用指南和最佳实践
  - 为所有权系统相关章节（移动、克隆、引用、生命周期等）添加了深入解释
  - 为集合类型章节（Vector、String、HashMap、迭代器、闭包）添加了详细说明
  - 为错误处理章节（panic、Result、?运算符、自定义错误）添加了完整的使用指南
  - 为模块系统章节（模块定义、use关键字、包和Crate、可见性）添加了详细说明
  - 为泛型章节添加了概念解释和性能考虑
  - 所有章节现在都有足够的文字说明，不再直接跳到代码示例，提升了学习体验

### 审查 (Review)
- **暗黑模式支持审查**：完成了暗黑模式实现的全面审查
  - 创建了详细的 `DARK_MODE_BUGS.md` 报告，记录了所有发现的问题
  - 发现的主要问题包括：硬编码颜色值、遮罩层颜色不随主题变化、阴影颜色硬编码等
  - 识别了需要修复的严重问题（对话框按钮颜色、遮罩层颜色）和中等问题（透明色硬编码）
  - 提供了详细的修复建议和优先级分类

- **小功能（复制、分享、收藏）审查**：完成了所有页面小功能的全面审查
  - 创建了详细的 `TINY_FEATURES_BUGS.md` 报告，记录了所有发现的问题
  - 发现的主要问题包括：功能缺失、实现不一致、未使用的代码、导航功能不完整等
  - 识别了需要修复的严重问题（FavoritesPage导航不完整、LearningResourcesPage URL无法复制）和中等问题（ChapterDetailPage复制功能未使用、各页面缺少收藏功能）
  - 提供了功能完整性矩阵和详细的修复建议

### 新增 (Added)
- **学习资源页面**：在设置页面添加"学习资源"入口
  - 创建了专门的 LearningResourcesPage 页面
  - 使用网格布局（2列）展示学习资源
  - 包含官方网站、论坛、包管理和书籍等 8 个资源
  - 点击资源卡片会显示对话框，展示资源详情和网址
  - 资源按类别使用不同颜色和图标区分

- **每日一贴关闭功能**：在"每日一贴"卡片右上角添加关闭按钮
  - 点击关闭按钮后，卡片会隐藏并显示 Toast "明天见"
  - 关闭状态会保存到本地，记录关闭日期
  - 在下一个自然日启动应用时，卡片会自动重新显示
  - 使用日期字符串（YYYY-MM-DD）来判断是否是新的一天

- **Quiz 页面进度卡片**：在测验页面添加了类似学习页面的进度卡片
  - 显示测验完成进度，包括环形进度条和完成数量
  - 实时显示已完成的测验数和总测验数
  - 使用与学习页面相同的设计风格，保持界面一致性

- **自定义面试问题功能**：允许用户手动添加面试问题并保存到数据库
  - 创建了 InterviewQuestionsManager 工具类来管理自定义面试问题的存储和加载
  - 在题库标签页添加"添加问题"按钮，点击后弹出对话框
  - 对话框支持输入问题、答案/要点、难度（简单/中等/困难）和标签
  - 自定义问题会保存到本地数据库，并在题库和模拟面试中使用
  - 自定义问题支持删除功能（仅限用户添加的问题，内置问题不可删除）
  - 模拟面试功能会自动使用合并后的问题列表（内置+自定义）

- **触觉反馈增强**：为答题页面添加细腻的震动反馈
  - 在 QuizPage 和 QuizDetailPage 中，答对时触发短促两次振动，答错时触发中长振动
  - 所有按钮点击时添加轻触反馈，提升交互体验
  - 使用 VibratorUtil 统一管理震动反馈

- **共享元素转场动画**：章节列表与详情页之间添加平滑转场
  - 点击章节卡片时，标题平滑"放大"并过渡到详情页位置
  - 使用 sharedTransition 实现，转场时长 300ms，采用 EaseInOut 曲线

- **课程完成度可视化**：在学习页面添加环形进度条
  - 使用 Progress 组件配合 ProgressStyle.Ring 展示课程完成度
  - 显示已完成章节数和总章节数，以及完成百分比
  - 进度条动态更新，实时反映学习进度

### 优化 (Changed)
- **面试页面添加按钮位置调整**：将"添加问题"按钮从内容区域移到顶部导航栏
  - 按钮显示在标题栏右侧，仅在面试标签页时显示
  - 移除了题库标签页中的"+ 添加问题"按钮
  - 使用"+"符号作为按钮，保持界面简洁

- **每日一贴设置**：在设置页面添加"每日一贴"开关
  - 用户可以在设置中启用或禁用每日一贴功能
  - 如果禁用，每日一贴将不会加载和显示
  - 默认状态为启用
  - 设置保存在 app_settings preferences 中

- **设置页面简化**：移除了"学习档案"卡片
  - 学习进度和测验进度现在分别在学习页面和测验页面显示
  - 设置页面专注于应用设置功能，界面更加简洁

- **添加问题对话框样式优化**：调整对话框宽度和边距
  - 对话框宽度从 100% 调整为 90%，最大宽度限制为 400px
  - 添加居中对齐，使对话框在屏幕上居中显示
  - 改善对话框的视觉效果，不再占满整个屏幕宽度

- **设置页面布局优化**：重新组织设置页面结构
  - 将"学习资源"和"我的收藏"移到页面顶部，作为独立的 section（无标题）
  - 这两个功能项现在显示在"设置"标题之前
  - 其他设置项保持在"设置"标题下方
  - 提升重要功能的可见性和可访问性

- **面试问题显示优化**：将星星从难度标签中分离
  - 星星现在作为独立的元素显示，不再包含在难度标签内
  - 星星没有背景色，仅显示星星符号
  - 星星显示在难度标签旁边，两者之间有适当间距
  - 适用于题库列表和模拟面试界面

- **添加问题按钮优化**：使用 SVG 图标替代文本
  - 创建了 `icon_add.svg` 图标文件（支持浅色和深色主题）
  - 将"添加问题"按钮从文本"+"改为使用 SVG 图标
  - 图标在浅色和深色模式下使用 Rust 主色（#FB923C），保持一致的品牌色彩
  - 提升界面一致性和视觉效果

- **图标主题适配优化**：为关闭和加号图标添加浅色/深色模式支持
  - 关闭图标：浅色模式使用深灰色（#1F2937），深色模式使用白色（#FFFFFF）
  - 加号图标：浅色和深色模式均使用 Rust 主色（#FB923C），保持品牌一致性
  - 确保图标在不同主题下都有良好的可见性和对比度

- **界面简化**：移除共享元素转场动画和示例代码切换注释功能
  - 移除了章节列表和详情页之间的共享元素转场动画（sharedTransition）
  - 移除了示例代码组件中的"显示注释"切换开关和相关功能
  - 示例代码现在始终显示注释，简化了用户界面和代码逻辑

### 修复 (Fixed)
- **编译错误修复**：修复了 ArkTS 编译错误
  - 移除了 `Image` 组件中不支持的 `tintColor` 属性（LearnPage.ets 和 LearningResourcesPage.ets）
  - 修复了 `StatsRow()` 构建器方法调用后链式调用 `.width()` 的错误（InterviewPage.ets）
  - 修复了 `InterviewQuestionsManager.ets` 中的类型错误：将 `unknown` 类型改为更具体的类型
  - 移除了不支持的 `is` 类型守卫，改用显式类型检查和循环过滤
  - 修复了 `StarBadge` 构建器方法中不能链式调用 `.margin()` 的错误，将 margin 移到内部 Text 组件上
  - 修复了 `ExampleCodeView` 组件中 `@Prop onCopyClick` 函数类型错误：移除了函数类型的 `@Prop`，将复制逻辑移到组件内部实现
  - 所有编译错误已解决，代码可以正常编译

- **示例代码注释高亮**：为示例代码中的注释添加更浅的颜色显示
  - 创建了 `parseCodeWithComments()` 方法，解析代码并识别行注释（`//`）
  - 注释部分使用 `TEXT_TERTIARY`（浅灰色 `#9CA3AF`）显示，代码部分保持白色
  - 使用 `Text` 组件配合 `Span` 子组件实现不同颜色的文本显示
  - 提升代码可读性，便于区分代码和注释

- **Toast API 统一管理**：创建 ToastUtil 工具类统一管理 Toast 显示
  - 创建了 `ToastUtil.ets` 工具类，统一管理所有 Toast 显示
  - 替换了所有页面中的 `promptAction.showToast()` 调用，统一使用 `ToastUtil.showToast()`
  - 涉及页面：ChapterDetailPage、SyntaxPage、SettingsPage、FavoritesPage、ConnectionsPlayPage、TriviaPlayPage、QuizPlayPage、ProfilePage、TopicDetailPage
  - 注意：`showToast` 在 API 20 中已标记为弃用，但暂时仍可使用，未来需要迁移到新 API
  - 统一了 Toast 显示方式，便于未来迁移和维护

### 优化 (Changed)
- **语法速查页面交互优化**：优化API entry的交互体验
  - 整个卡片区域可点击切换展开/折叠状态
  - 黄色chip（复制按钮）点击时不会触发卡片的切换，只执行复制操作
  - 代码块点击时也不会触发卡片切换，只执行复制操作

- **学习档案界面优化**：重新设计学习档案显示方式
  - 将原来的进度条和三个统计box改为两个简洁的进度box
  - 第一个box显示课程进度：格式为 "已读章节数 / 总章节数"（如 4 / 64）
  - 第二个box显示测试进度：格式为 "已完成测试数 / 总测试数"（如 1 / 10）
  - 界面更加简洁清晰，信息一目了然

- **课程单元显示优化**：简化单元entry的进度显示
  - 移除了单元头部的百分比显示（n%），避免信息重复
  - 保留进度条下方的 "n/m 已完成" 文本显示
  - 界面更加简洁，减少视觉干扰

- **每日一贴扩展**：将每日一贴从5条扩展到50条
  - 新增45条高质量的Rust学习小贴士
  - 涵盖所有权、借用、生命周期、错误处理、并发、异步、宏等核心主题
  - 提供更多样化的学习提示，增强学习体验

### 新增 (Added)
- **收藏功能**：为课程章节添加了收藏功能
  - 创建了 FavoritesManager 工具类，管理收藏数据的增删改查
  - 在课程详情页导航栏添加收藏按钮，支持一键收藏/取消收藏
  - 创建了收藏页面（FavoritesPage），展示所有收藏的章节
  - 在设置页面添加"我的收藏"入口，方便用户访问收藏列表
  - 支持编辑模式，可批量删除收藏
  - 添加了收藏相关的图标资源（icon_favorite.svg, icon_favorite_selected.svg）

- **课程详情页分享和朗读功能**：为课程详情页添加了分享和朗读功能
  - 创建了TextReaderUtil工具类，使用HarmonyOS TTS API实现文本朗读
  - 在导航栏添加了分享和朗读按钮（参考TopicDetailPage的实现）
  - 分享功能：支持分享章节标题、描述、内容和知识点总结
  - 朗读功能：支持朗读完整的章节内容，包括标题、描述、内容和知识点
  - 实现了getReadContent和buildShareText方法，生成朗读和分享内容
  - 页面销毁时自动停止朗读，避免资源泄漏
  - 添加了icon_voice.svg图标资源（base和dark模式）

- **面试题库扩展**：将面试题库从15题扩展到100题
  - 新增85道高质量Rust面试题，覆盖从基础到高级的各个主题
  - 涵盖所有权、借用、生命周期、智能指针、并发、异步、错误处理、Trait、泛型等核心概念
  - 包含系统编程、性能优化、内存管理、类型系统等高级主题
  - 每题包含：核心要点、常见错误回答、代码推理、追问方向
  - 所有题目按难度分类（简单/中等/困难），便于筛选和学习

### 优化 (Changed)
- **课程内容 Markdown 渲染**：为课程章节内容添加 Markdown 渲染支持
  - 创建了 MarkdownRenderer 组件，支持基本的 Markdown 语法
  - 支持标题（# ## ###）、段落、粗体（**text**）、斜体（*text*）、行内代码（`code`）、代码块（```code```）、列表（- item）、链接（[text](url)）
  - 更新了 ChapterDetailPage，使用 MarkdownRenderer 渲染课程内容
  - 提升课程内容的可读性和格式化效果

- **面试页面标签调整**：调整面试页面的标签文本
  - 第一个子标签从"测试"改为"题库"
  - 页面标题从"面试宝典"改为"面试"
  - 保持与导航栏标签的一致性

- **设计系统统一**：统一整个项目的设计系统，将所有硬编码的设计值迁移到 DesignSystem.ets
  - 扩展了 DesignSystem.ets，添加了所有缺失的设计常量：
    - 新增标签页相关尺寸（TAB_HEIGHT, TAB_BAR_HEIGHT, TAB_BAR_PADDING, TAB_BAR_RADIUS）
    - 新增游戏相关尺寸（GAME_FLAG_WIDTH, GAME_RESULT_ICON, GAME_TIMER_LARGE 等）
    - 新增游戏相关字体大小（GAME_LEVEL, GAME_COMBO, GAME_BUTTON, GAME_RESULT_TITLE 等）
    - 新增圆角常量（RADIUS_XS, RADIUS_XXL）
    - 新增系统颜色类（SystemColors）用于透明、白色、黑色等系统颜色
    - 新增游戏颜色类（GameColors）用于游戏相关的硬编码颜色（待迁移到资源文件）
  - 更新了 InterviewPage.ets，将所有硬编码值替换为设计系统常量
  - 更新了 QuizDetailPage.ets，将大部分硬编码值替换为设计系统常量
  - 剩余文件需要继续更新：QuizPage.ets, QuizPlayPage.ets, 其他游戏页面, LearnPage, SettingsPage, ProfilePage, SyntaxPage 等
  - 统一使用 Spacing, Sizes, FontSizes, FontWeights, Colors, SystemColors 等设计系统常量
  - 提升代码可维护性和设计一致性

### 修复 (Fixed)
- **UI不一致性问题修复**：修复了UI_INCONSISTENCIES.md中报告的主要问题
  - **GameColors硬编码颜色迁移**：将GameColors中的所有硬编码颜色值迁移到color.json资源文件
    - 添加了game_button_secondary、game_button_primary、game_orange、game_red等15个游戏相关颜色到base和dark模式
    - 更新DesignSystem.ets，GameColors现在引用资源文件，支持深色模式自动切换
  - **硬编码颜色值修复**：修复了所有页面中硬编码的颜色值
    - InputPlayPage.ets：修复promptAction对话框中的硬编码颜色，使用资源引用
    - FakeFlagPlayPage.ets：修复promptAction对话框中的硬编码颜色，使用资源引用
    - QuizPlayPage.ets：修复promptAction对话框中的硬编码颜色，使用资源引用
    - TriviaPlayPage.ets：修复promptAction对话框中的硬编码颜色，使用资源引用
    - 为每个页面添加了getColorValue辅助函数，从资源中获取颜色值用于promptAction API
  - **Color.White/Color.Black使用修复**：修复了直接使用Color.White/Color.Black的问题
    - QuizDetailPage.ets：将Color.White替换为SystemColors.WHITE
    - ConnectionsPlayPage.ets：将Color.White替换为$r('app.color.text_white')，支持深色模式
  - **深色模式支持改进**：所有修复的颜色现在都支持深色模式自动切换
    - 游戏相关颜色在dark/element/color.json中都有对应的深色模式值
    - 确保所有颜色引用都通过资源系统，而不是硬编码

- **移除所有SVG图标的fillColor属性**：移除了所有页面和组件中SVG图标的fillColor代码
  - 移除了HomePage、ProfilePage、InterviewPage、TopicDetailPage、TopicListPage中图标的fillColor
  - 移除了ConnectionsPlayPage、TriviaPlayPage、FakeFlagPlayPage、InputPlayPage中图标的fillColor
  - 移除了QuizPlayPage、QuizPage、QuizDetailPage中图标的fillColor
  - 移除了SettingsPage、ChapterDetailPage、LearnPage中图标的fillColor
  - SVG图标现在使用SVG文件本身的颜色，不再通过fillColor动态修改颜色
  - 确保所有图标在所有情况下都不使用fillColor属性

### 优化 (Changed)
- **模拟面试时间到UI优化**：在时间到界面保留问题横幅
  - 在MockTimeoutScreen中添加了问题卡片显示
  - 显示当前问题的难度标签和问题内容
  - 用户可以在时间到后继续查看问题内容，方便进行自我评价

- **模拟面试视图布局统一优化**：统一并优化了所有模拟面试状态的布局
  - **SETUP（准备）屏幕**：
    - 统一标题区域布局，使用Column居中显示
    - 计时器选择改为卡片样式，按钮使用layoutWeight均匀分布
    - 提示卡片样式统一，间距优化
    - 添加顶部padding和底部按钮margin，保持视觉平衡
  - **RUNNING（进行中）屏幕**：
    - 统一按钮样式，使用layoutWeight和统一高度
    - 计时器添加底部margin，保持间距一致
    - 添加顶部padding，与其他屏幕对齐
  - **TIMEOUT（时间到）屏幕**：
    - 时间到提示改为Column布局，居中显示
    - 自我评价按钮改为卡片容器包裹，使用layoutWeight均匀分布
    - 统一按钮高度和样式
    - 添加Blank()保持底部按钮位置
  - **REVIEW（结束）屏幕**：
    - 评价结果改为Column居中显示
    - 统一卡片内间距和分割线间距
    - 底部按钮使用layoutWeight均匀分布
    - 添加顶部padding，与其他屏幕对齐
  - 所有屏幕统一使用相同的间距、按钮高度和卡片样式，提升视觉一致性和美观度
  - **计时器字体大小优化**：将模拟面试进行中屏幕的计时器字体从72增大到96，使时间显示更加醒目
  - **结果详情界面滚动优化**：将模拟面试结果详情界面（REVIEW屏幕）改为可滚动布局
    - 使用Scroll包裹内容区域，支持滚动查看完整内容
    - 底部按钮固定在底部，不会被内容遮挡
    - 添加Spring边缘效果，提升滚动体验
  - **按钮位置调整**：交换了结果详情界面中"结束"和"下一题"按钮的位置
    - "结束"按钮现在在左侧，"下一题"按钮在右侧
    - 更符合用户操作习惯，主要操作按钮（下一题）位于右侧

### 新增 (Added)
- **模拟面试功能**：新增压力模拟面试模式
  - 双标签页设计：题库 / 模拟面试（系统 Chip 风格标签栏）
  - 计时器预设：30秒 / 1分钟 / 2分钟 / 5分钟
  - 压力增强：计时器变色（绿→黄→红）
  - 硬停止：时间到自动结束
  - 自我评价：自信 / 一般 / 慌了
  - 结束后查看参考要点
  - 无 AI 评分，无录音，专注思考训练

### 优化 (Changed)
- **面试页面 UI 简化**：移除多余 emoji，保持简洁专业
  - 标签栏改为系统风格 Chip Tab Bar（圆角胶囊容器 + 浮动选中项）
  - 移除所有装饰性 emoji，仅保留 ⭐ 表示面试频率
  - 难度筛选使用颜色区分，无需 emoji 标记
  - 自我评价按钮改为简洁文字配色按钮

- **面试题库增强**：全面升级面试题内容和展示
  - 精选 15 道高质量面试题，覆盖 Rust 核心概念
  - 每题包含：核心要点、常见错误回答、代码推理、追问方向
  - 问题标题包含频率标记（⭐⭐⭐ 必问、⭐⭐ 常见）
  - 新增难度筛选（简单/中等/困难）
  - 展示统计信息和面试频率说明
  - 所有内容强调"思考方式"而非死记硬背

- **课程详情页代码复制**：在每个课程章节的示例代码区域添加复制按钮
  - 点击可将代码复制到剪贴板
  - 显示 Toast 提示复制结果

- **Rust 概述章节**：在第一个单元（Rust 基础）的开头添加了"Rust 概述"章节
  - 章节 ID: '0'，作为 unit1 的第一个章节
  - 内容包含：Rust 的特点、应用场景、为什么学习 Rust 等概述性内容
  - 包含 Hello World 示例代码和基本编译运行说明
  - 为初学者提供 Rust 语言的整体介绍，为后续学习打下基础

### 修复 (Fixed)
- **修复 PreferencesManager 竞态条件**：修复了 `PreferencesManager.getPreferences` 方法中的潜在竞态条件问题
  - 添加了 `pendingPromises` Map 来跟踪正在进行的创建操作
  - 当多个并发调用请求同一个 Preferences 实例时，后续调用会等待同一个 Promise，而不是创建多个实例
  - Promise 在异步操作开始前立即存储，确保并发安全
  - 更新了 `clearCache()` 和 `removePreferences()` 方法，同时清除待处理的 Promise
  - 解决了 BUG_REPORT.md 中报告的问题 #3
- **应用图标配置修复**：修复了应用图标显示问题
  - 优化了 `AppScope/resources/base/media/layered_image.json` 的格式
  - 确认了图标配置：`background.png`（橙色背景）和 `foreground.png`（白色 Rust 文字）
  - 注意：`foreground.png` 应该是透明背景，如果显示不正确，请确保图片文件是透明背景的 PNG

### 删除 (Removed)
- **删除 Gemini 服务**：移除了 GeminiService 及相关代码
  - 删除了 `entry/src/main/ets/services/GeminiService.ets` 文件
  - 从 `RustTypes.ets` 中删除了 `ExecutionResult` 接口和 `Language` 枚举
  - 从 `RustConstants.ets` 中删除了 `INITIAL_CODE` 常量
  - 原因：项目没有 API Key 或服务器支持

### 清理 (Cleanup)
- **删除未使用的资源文件**：清理了 `entry/src/main/resources` 目录中未使用的文件
  - 删除了 base/media 中的 33 个未使用的图标和资源文件
  - 删除了 dark/media 中的 19 个未使用的图标文件
  - 保留的文件：导航栏图标、设置页面图标、以及其他在代码中实际使用的资源

### 修复 (Fixed)
- **编译错误修复**：修复了所有 ArkTS 编译错误
  - ✅ 修复类型错误：明确指定所有类型，避免使用 `any` 和 `unknown`
  - ✅ 修复 `in` 操作符：改用 `hasOwnProperty` 检查对象属性（后改为 `params['key'] !== undefined`）
  - ✅ 修复 Builder 方法语法：移除 Builder 方法中的 `const` 声明，改用条件渲染
  - ✅ 修复 `hasOwnProperty` 受限问题：改用 `params['key'] !== undefined` 检查属性
  - ✅ 移除已弃用的 `router.back()` 调用：Navigation 组件会自动处理返回
- **Bug 修复**：修复了审查报告中发现的所有 9 个 Bug
  - ✅ 修复判断题逻辑错误（QuizPage.ets 和 QuizDetailPage.ets）：添加了正确的答案判断逻辑，处理空数组情况
  - ✅ 修复非空断言风险：在所有 Builder 方法中添加了空值检查，避免使用非空断言
  - ✅ 修复 parseInt 可能返回 NaN（LearnPage.ets）：添加了 NaN 检查和字符串比较回退
  - ✅ 修复数组越界风险（QuizPage.ets）：在 getCurrentQuestion() 方法中添加了边界检查
  - ✅ 修复多选题提交逻辑可能重复计分：添加了 answeredQuestionIndices Set 来跟踪已回答的问题
  - ✅ 修复路由参数类型安全问题：添加了严格的参数类型检查和验证
  - ✅ 修复 Preferences 数据解析错误处理：添加了完善的类型检查和错误恢复机制
  - ✅ 修复除零风险（QuizDetailPage.ets）：在正确率计算中添加了题目数检查

### 新增 (Added)
- **Bug 审查报告**：创建了 `docs/BUG_REVIEW.md`，详细记录了项目中发现的 10 个潜在 Bug
  - 包括高优先级问题：判断题逻辑错误、非空断言风险、文件列表配置错误
  - 包括中优先级问题：parseInt NaN、数组越界、多选题提交逻辑、路由参数类型安全、Preferences 数据解析
  - 包括低优先级问题：除零风险、API Key 配置
  - 每个 Bug 都提供了详细的问题描述、影响分析和修复建议

### 新增 (Added)
- **题库系统扩展**：支持三种题型（判断题、单选题、多选题）
  - 新增500+道Rust相关题目（150道判断题、250道单选题、100道多选题）
  - 更新QuizPage UI组件，支持不同题型的显示和交互
    - 判断题：显示True/False按钮
    - 单选题：单选选项
    - 多选题：多选选项，带复选框和提交按钮
    - 题目类型标签显示
    - 答案检查和反馈

### 修复 (Fixed)
- 修复QuizPage.ets中的ArkTS语法错误（@Builder函数中不能使用const声明）
- 修复UI组件嵌套问题，确保margin等属性正确应用

## [未发布]

### 新增 (Added)
- **语法速查扩展**：大幅扩展语法标签页内容，从 5 个分类增加到 20 个分类
  - 新增分类：所有权与借用、集合类型方法、迭代器方法、Option 和 Result、结构体和枚举、模块和可见性、泛型和 Trait、智能指针、并发编程、异步编程、错误处理、生命周期、常用类型转换、常用标准库类型
  - 每个分类包含多个常用语法、方法和 API 的速查条目
  - 总计超过 200 个语法速查条目，涵盖 Rust 编程的各个方面
- **课程系统扩展**：添加了 63 个 Rust 课程，涵盖从基础到高级的所有核心主题
  - 创建了 12 个课程单元，按主题组织：Rust 基础、所有权系统、复合数据类型、集合类型、错误处理、模块系统、泛型与 Trait、智能指针、并发编程、异步编程、高级特性、实战项目
  - 在 `RustTypes.ets` 中添加了 `CourseUnit` 接口定义
  - 在 `RustConstants.ets` 中创建了 `COURSE_UNITS` 数组和扩展的 `COURSE_CHAPTERS` 数组
  - 更新了 `LearnPage.ets`，支持按单元分组展示课程
  - 添加了单元展开/折叠功能
  - 显示每个单元的进度（已完成/总课程数）
  - 默认展开前两个单元

## [未发布]

### 新增 (Added)
- **Rust 大师应用完整迁移**：将 React/TypeScript 的 Rust 大师应用完整迁移到 HarmonyOS ArkTS
  - **设计系统**：创建统一的设计系统常量文件 `DesignSystem.ets`，包含间距、圆角、字体、阴影等设计规范
  - **颜色资源扩展**：添加 Rust 主题颜色（橙色系）到 base 和 dark 模式
  - **类型定义**：创建 `RustTypes.ets`，定义所有 TypeScript 接口对应的 ArkTS 类型
  - **数据常量**：创建 `RustConstants.ets`，迁移所有常量数据（课程、测验、速查、面试题等）
  - **主页面重构**：重构 `Index.ets`，实现 5 个 Tab 切换（学习、编辑器、测验、面试、设置）
  - **底部导航栏**：创建 `NavBar.ets` 组件，实现底部导航功能
  - **学习页面**：创建 `LearnPage.ets`，实现章节列表、详情、速查表、搜索功能
  - **编辑器页面**：创建 `EditorPage.ets` 和 `CodeEditor.ets`，实现代码编辑、运行、AI 功能
  - **测验页面**：创建 `QuizPage.ets`，实现答题流程、结果统计、进度追踪
  - **面试页面**：创建 `InterviewPage.ets`，实现搜索、展开、难度标签功能
  - **设置页面**：创建 `SettingsPage.ets`，实现学习档案、数据持久化

### 变更 (Changed)
- **应用名称和 Bundle ID 更新**：将应用名称改为 "Rust 从入门到放弃"，Bundle ID 改为 "com.douhua.rustmaster"
  - 更新了 AppScope/app.json5 中的 bundleName
  - 更新了 AppScope/resources/base/element/string.json 和 en_US/element/string.json 中的 app_name

## [未发布]

### 优化 (Optimized)
- **历史旗帜图片转换为 WebP 格式**：将 2951 张历史旗帜图片从 PNG 转换为 WebP
  - 转换前大小：91 MB
  - 转换后大小：34 MB
  - 节省空间：**57 MB**（减少约 63%）
  - 更新了 FlagHistoryPage 和 FlagDetailPage 中的图片引用

- **国徽图片转换为 WebP 格式**：将 198 张国徽图片从 PNG 转换为 WebP
  - 转换前大小：23 MB
  - 转换后大小：9.7 MB
  - 节省空间：**13.3 MB**（减少约 58%）
  - 更新了 coatOfArmsUtil 中的图片引用

- **国歌音频压缩优化**：将国歌音频比特率优化
  - Top 10 国家保持原比特率（美、英、法、德、中、俄、印、巴西、加、澳）
  - 其他 178 个国家压缩至 64kbps
  - 转换前大小：342 MB
  - 转换后大小：134 MB
  - 节省空间：**222 MB**（减少约 65%）

### 新增 (Added)
- **振动反馈功能**：为所有游戏添加触觉反馈
  - 创建了VibratorUtil工具类，使用HarmonyOS的vibrator API提供振动反馈（参考morse项目实现）
  - 支持四种振动类型：
    - **点击振动（tap）**：轻触反馈，50ms短振
    - **正确答案振动（correct）**：短促两次振动，表示答对
    - **错误答案振动（incorrect）**：中长振动250ms，表示答错
    - **胜利振动（win）**：三次短振，表示完成关卡
  - 为所有游戏页面集成振动反馈：
    - **QuizPlayPage**：选项点击、正确答案、错误答案、按钮点击、完成关卡
    - **MemoryPlayPage**：卡片点击、匹配成功、匹配失败、按钮点击、完成关卡
    - **TriviaPlayPage**：选项点击、正确答案、错误答案、按钮点击、完成关卡
    - **InputPlayPage**：提交答案、正确答案、错误答案、按钮点击、完成关卡
    - **FakeFlagPlayPage**：旗帜点击、正确答案、错误答案、按钮点击、完成关卡
  - 在"我"页面（ProfilePage）添加振动设置开关，默认启用
  - 振动设置使用Preferences持久化存储，可在设置中随时开启/关闭
- **所有游戏音效功能**：为所有游戏添加音效播放功能
  - 从flagame项目复制了14个音效文件（correct、incorrect、button、tap、success、congrats、over等）到rawfile/sfx目录
  - 创建了SoundEffectUtil工具类，使用HarmonyOS的SoundPool API播放音效（参考morse项目实现）
  - 为所有游戏页面集成音效播放：
    - **QuizPlayPage**：正确答案、错误答案、按钮点击、游戏完成、游戏失败
    - **MemoryPlayPage**：卡片匹配成功、匹配失败、游戏完成、游戏失败、按钮点击
    - **TriviaPlayPage**：正确答案、错误答案、按钮点击、游戏完成、游戏失败
    - **InputPlayPage**：正确答案、错误答案、按钮点击、游戏完成、游戏失败
    - **FakeFlagPlayPage**：正确答案、错误答案、按钮点击、游戏完成、游戏失败
    - **PaintPlayPage**：正确答案、错误答案、填色音效、提示音效、按钮点击、关卡完成
  - 所有页面初始化时自动初始化音效播放器，页面销毁时释放资源
  - 移除了轻触音效（tap），避免与结果音效混淆
- **移除游戏反馈Toast**：移除所有游戏页面中的反馈提示toast
  - 移除了TriviaPlayPage中的"✓ 正确!"和"✗ 错误"toast
  - 移除了InputPlayPage中的"✓ 正确!"和"✗ 答案不正确"toast
  - 保留音效反馈，提供更流畅的游戏体验
- **选项逐个出现动画**：为所有有选项的游戏添加选项逐个出现的动画效果
  - **QuizPlayPage**：选项和国旗选项逐个出现，每个选项延迟100ms，使用淡入和缩放动画
  - **TriviaPlayPage**：选项逐个出现，每个选项延迟100ms，使用淡入和缩放动画
  - **FakeFlagPlayPage**：国旗选项逐个出现，每个选项延迟100ms，使用淡入和缩放动画
  - 动画在题目加载和切换到下一题时自动触发，提升视觉体验

### 修复 (Fixed)
- **记忆游戏国旗翻转问题**：修复记忆游戏中卡片翻转时国旗也被翻转的问题
  - 对国旗图片应用反向旋转，抵消卡片容器的翻转效果
  - 确保国旗在卡片翻转时保持正常方向显示
- **朝鲜国歌错误修复**：修复朝鲜国歌文件错误的问题
  - 发现并删除了错误的朝鲜国歌文件（实际是苏联国歌）
  - 从Wikimedia Commons下载了正确的朝鲜国歌（Aegukka）OGG版本
  - 新文件大小：915KB（原错误文件：8.2MB）
  - 验证了代码已正确过滤缺失的国歌（不丹、阿曼、加蓬、几内亚比绍、多哥、东帝汶）

### 变更 (Changed)
- **游戏页面下一关优化**：所有quiz类游戏页面的"下一关"按钮改为在当前页面重新加载数据，而不是push到新页面
  - 修改了QuizPlayPage、TriviaPlayPage、InputPlayPage、FakeFlagPlayPage、MemoryPlayPage
  - 避免了导航栈过长的问题，提升用户体验
  - 添加了loadLevel方法来统一处理关卡数据的重新加载和状态重置
- **阿富汗历史国旗数据更新**：添加2021年当前国旗，删除1000年数据
  - 从flag folder复制af.svg并转换为PNG格式，保存为flag_history_af_2021.png
  - 在FlagHistoryData.ets中添加2021年的数据条目，标记为"当前"国旗
  - 删除1000年的历史数据条目和对应的PNG文件
- **画廊页面搜索提示优化**：在未找到匹配国家时添加提示文字
  - 在"未找到匹配的国家"下方添加较小的描述文字："修改关键词或选择"全部"或其他大洲"
  - 提示用户可以通过切换chip或修改搜索关键词来查找结果
- **历史国旗资源位置调整**：将所有历史国旗PNG文件移动到rawfile目录
  - 将所有历史国旗PNG文件从 `entry/src/main/resources/base/media/` 移动到 `entry/src/main/resources/rawfile/flag_history/`
  - 更新了 `FlagHistoryPage.ets` 和 `FlagDetailPage.ets`，使用 `$rawfile` 替代 `$r` 来加载历史国旗资源
  - 资源路径格式从 `app.media.flag_history_xx_yyyy` 改为 `flag_history/flag_history_xx_yyyy.png`
  - 更新了 `FLAG_HISTORY_USAGE.md` 文档中的路径说明
- **历史国旗banner优化**：
  - 标题行使用箭头图标（icon_arrow_right），完全复制涂鸦说明banner的样式
  - 整个历史国旗卡片区域可点击，点击后跳转到历史国旗详情页
  - 移除了历史国旗单元格中的年份文本，只显示国旗图片，界面更简洁
  - 移除了单个历史国旗项的点击事件，统一使用卡片点击跳转
- **历史国旗格式转换为PNG**：将所有历史国旗从SVG格式转换为PNG格式
  - 创建了转换脚本 `scripts/convert_flag_history_to_png.js`，使用sharp库将SVG转换为PNG
  - 成功转换2982个历史国旗文件为PNG格式（800x533像素，3:2比例）
  - 删除了所有原始SVG文件，确保只使用PNG格式
  - PNG文件保留在 `entry/src/main/resources/base/media/` 目录，使用 `$r('app.media.${imagePath}')` 加载
- **历史国旗标题添加箭头并支持点击跳转**：在历史国旗标题旁边添加右箭头图标
  - 完全复制涂鸦说明banner的箭头样式（icon_arrow_right），像素级保持一致
  - 整个历史国旗卡片区域可点击，点击后跳转到历史国旗详情页
  - 移除了单个历史国旗项的点击事件，统一使用卡片点击跳转
  - 箭头颜色自动适配明暗模式
- **历史国旗单元格优化**：移除历史国旗单元格中的年份文本，只显示国旗图片，界面更简洁
- **国旗详情页历史国旗显示优化**：优化历史国旗banner的显示
  - 历史国旗只显示一行，最多显示3个项目（前三个）
  - 移除了"查看全部"箭头按钮，界面更简洁
- **国徽资源位置调整**：将所有PNG格式的国徽文件移动到rawfile目录
  - 将198个PNG国徽文件从 `entry/src/main/resources/base/media/` 移动到 `entry/src/main/resources/rawfile/coat_of_arms/`
  - 更新了 `coatOfArmsUtil.ets`，使用 `$rawfile` 替代 `$r` 来加载国徽资源
  - 资源路径格式从 `app.media.coat_of_arms_xx` 改为 `coat_of_arms/coat_of_arms_xx.png`
  - 所有国徽文件（包括之前转换失败的kg、nl、rs）已全部完成转换并移动到rawfile目录
  - 将198个原始SVG国徽文件移动到项目根目录的 `coat of arms svg backup/` 文件夹作为备份
- **国徽格式转换为PNG**：将所有国徽从SVG格式转换为PNG格式
  - 创建了转换脚本 `scripts/convert_coats_to_png.js`，使用sharp库将SVG转换为PNG
  - 转换后的PNG图片尺寸为512x512，保持透明背景
  - FlagDetailPage.ets 已正确支持显示PNG格式的国徽
  - 转换脚本支持多种参数：
    - `--clean`: 转换后删除原SVG文件
    - `--force`: 强制重新转换已存在的PNG文件
    - `--retry`: 只转换之前失败的文件（kg, nl, rs）
  - 改进了转换脚本的错误处理，支持多种转换方法：
    - 自动处理UTF-16编码的SVG文件
    - 对于复杂SVG，自动尝试降低分辨率
    - 提供详细的错误信息和建议
- **历史国旗详情页UI优化**：改进历史国旗详情页的显示效果
  - 在左侧添加时间线效果（竖线和圆点），更清晰地展示时间顺序
  - 将国旗图片宽度调整为60%，使显示更紧凑
  - 减少每个单元格头部的高度（年份标签底部间距从12px减少到8px）
  - 将时间线上的圆点颜色改为主蓝色（button_primary），更加醒目
  - 减少单元格/行的整体高度：
    - 国旗图片高度从200px减少到120px
    - 单元格内边距从16px减少到12px
    - 图片底部间距从20px减少到8px
    - 行之间的间距从16px减少到12px
- **所有游戏关卡完成按钮优化**：将"再来一次"按钮改为"下一关"或"完美收官"
  - Quiz游戏：非最后一关显示"下一关"，最后一关显示"完美收官"，点击退出
  - FakeFlag游戏：非最后一关显示"下一关"，最后一关显示"完美收官"，点击退出
  - Input游戏：非最后一关显示"下一关"，最后一关显示"完美收官"，点击退出
  - Trivia游戏：非最后一关显示"下一关"，最后一关显示"完美收官"，点击退出
  - Memory游戏：非最后一关显示"下一关"，最后一关显示"完美收官"，点击退出
  - Paint游戏：非最后一关显示"下一关"，最后一关显示"完美收官"，点击退出
  - 点击"下一关"会自动跳转到下一关，点击"完美收官"会退出游戏

### 删除 (Removed)
- **删除无效的anthems目录**：删除了 `entry/src/main/resources/base/media/anthems` 目录（导致编译错误的无效路径）
- **清理未使用和重复文件**：删除了项目根目录下的未使用和重复文件
  - 删除了 `Flag_of_FIAV.svg 1.png`（重复文件，FIAV PNG已正确放置在 `entry/src/main/resources/base/media/flag_fiav.png`）
  - 删除了 `download_anthems.py`（未使用的Python脚本）
  - 删除了 `IconPark - Icons Pack (Community)/` 目录（未使用的图标包，占用11MB空间，项目使用app.media中的图标资源）
  - 删除了临时报告和评估文件：
    - `UNUSED_FILES_REPORT.md`
    - `CODE_REVIEW_2025-12-08_FULL.md`
    - `CODE_REVIEW_2025-12-08.md`
    - `PROJECT_EVALUATION.md`

### 修复
- **州旗列表页顶部区域间距优化**：修复州旗列表页顶部国家信息卡片的间距问题
  - 将顶部卡片的 padding 从 20 调整为 24，与专题详情页保持一致
  - 移除了顶部卡片的底部 margin，统一间距样式
  - 为网格添加顶部 padding（top: 16），修复网格没有顶部间距的问题
  - 参考 TopicDetailPage 的实现，保持页面样式一致性
- **涂鸦游戏WebView渐显效果**：为涂鸦游戏的WebView添加了平滑的渐显动画效果
  - 使用`animateTo` API替代`setTimeout`，实现更平滑的渐显动画
  - 添加了`transition`效果，动画时长400ms，使用`cubicBezier(0.42, 0, 0.58, 1)`缓动曲线（easeInOut效果）
  - WebView初始透明度为0，在页面加载完成并设置好背景色和游戏后，平滑渐显到完全不透明
  - 提升了用户体验，避免了WebView内容的突然出现
  - 修复了编译错误：使用`curves.cubicBezier`替代不存在的`curves.easeInOut`
- **涂鸦游戏深色模式检测优化**：改进了深色模式的检测和背景色处理
  - 新增`detectDarkMode()`方法，单独处理深色模式检测（参考injectSVG的方式）
  - 使用两种方法检测深色模式，按优先级：
    1. 读取保存的主题设置（Preferences）- 最可靠的方法
    2. 通过资源管理器检测系统主题（跟随系统模式时使用）
  - 在WebView页面加载完成时（onPageEnd）重新检测并更新背景色，确保获取最新的颜色模式
  - 根据深色模式正确设置背景色：深色模式使用`#1C1C1E`，浅色模式使用`#F5F6F7`
  - 确保背景色在设置游戏之前正确注入，避免背景色闪烁
  - 修复了编译错误：移除了不存在的`ApplicationContext.getColorMode()`方法调用
  - 添加了详细的调试日志，帮助诊断深色模式检测问题
  - 改进了系统主题检测逻辑，正确处理colorMode为0（浅色）和1（深色）的情况
- **移除探索页面历史国旗功能**：从探索页面移除了历史国旗卡片和相关功能
  - 移除了`hasAnyHistory`导入和`hasHistory`状态变量
  - 移除了历史国旗卡片UI和路由跳转
  - 简化了探索页面，只保留游戏相关功能
- **专题顺序调整**：将国际组织专题移到相似旗专题后面
- **FIAV旗帜显示**：修复旗帜学协会国际联盟（FIAV）旗帜显示问题
  - 修改getFlagImageSource函数，让FIAV使用PNG格式（与其他国际组织一致）
  - 移除了rawfile/flags目录下的fiav.svg文件
  - 添加了`flag_fiav.png`文件到`entry/src/main/resources/base/media/`目录
  - FIAV旗帜现在可以正常显示，不再变形

### 新增
- 在国旗详情页底部（国徽前面）添加历史国旗banner，使用Grid展示历史国旗，点击可进入历史国旗详情页

### 重大更新
- **历史国旗数据全面更新**：重新提取和下载所有历史国旗数据
  - 数据量从249条增加到1411条（增长466%）
  - 国家数量从53个增加到195个（覆盖所有大洲）
  - 包含法国、英国、美国、中国等所有主要国家
  - **修复提取逻辑**：从每个单元格中提取图片和年份（而不是从表头），确保图片和年份正确对应
  - 下载了1411张历史国旗图片（450个新下载，961个已存在，0个失败）
  - 修复了图片和年份不匹配的问题

### 修复
- 修复历史国旗数据加载时机问题，确保在设置国家信息后立即加载历史国旗数据
- 修复历史国旗提取脚本，改进法国和英国的国家名称匹配逻辑，确保能正确识别这些国家
  - 将法国和英国的匹配逻辑提前，优先匹配这些常见国家
- 修复阿联酋历史国旗顺序：将1968年和1200年的顺序调整为正确的历史时间线
- 修复历史国旗提取逻辑：从表格列标题提取年份，而不是从单元格内容中提取，确保图片和年份正确对应

### 优化
- 历史国旗详情页：移除国旗图片的容器和背景，让国旗直接显示，保持原始外观
- 历史国旗详情页：移除每个国旗下方的描述文本，只显示年份和国旗图片
- 历史国旗banner：移除"查看全部"文本，只保留箭头符号，箭头颜色与标题文本颜色一致

## [未发布]

### 修复 (Fixed)
- **国徽下载脚本**：修复下载脚本中缺失的14个国家代码
  - 添加了缺失的国家：ao (安哥拉)、cd (刚果(金))、cf (中非)、cg (刚果(布))、cm (喀麦隆)、cy (塞浦路斯)、dm (多米尼克)、ga (加蓬)、gq (赤道几内亚)、hu (匈牙利)、kn (圣基茨和尼维斯)、ng (尼日利亚)、st (圣多美和普林西比)、td (乍得)
  - 手动下载了dm和kn的国徽（API有数据但脚本未下载）
  - 手动添加了cd (刚果(金))的国徽文件（从项目根目录移动到media文件夹并重命名为coat_of_arms_cd.svg）
  - 当前共有198个国徽文件（195个国家中，195个都有国徽）
- **移除运行时下载功能**：由于所有国徽已预下载到media文件夹，移除了运行时下载相关代码
  - 从 `ProfilePage.ets` 中移除了下载所有国徽的设置项和相关UI
  - 移除了 `CoatOfArmsDownloader` 和 `CoatOfArmsDatabase` 的引用
  - 国徽现在完全通过 `coatOfArmsUtil.ets` 从本地资源加载，无需运行时下载

## [未发布]

### 新增 (Added)
- **旗帜学协会国际联盟**：添加旗帜学协会国际联盟（FIAV）到国际组织列表
  - 组织代码：`fiav`
  - 中文名称：旗帜学协会国际联盟
  - 英文名称：Fédération internationale des associations vexillologiques
  - 总部：休斯顿 / 伦敦
  - 网站：http://www.fiav.org
  - 简介：旗帜学协会国际联盟是致力于旗帜学研究与推广的国际组织，成立于1969年，由惠特尼·史密斯创立。拥有55个成员协会及组织，促进全球旗帜学知识的交流与发展。协会旗帜图案为一个接绳结。
- **国际组织网站信息**：为所有国际组织添加网站信息
  - 在 `InternationalOrg` 接口中添加 `website` 字段（可选）
  - 在国际组织详情页显示网站信息（不可点击的文本）
  - 在朗读内容和分享内容中包含网站信息
  - 已添加网站的组织：联合国、欧盟、奥林匹克、北约、东盟、非盟、阿盟、红十字会、旗帜学协会国际联盟
- **国际组织简介**：为所有国际组织添加简介信息
  - 在 `InternationalOrg` 接口中添加 `description` 字段（可选）
  - 在国际组织详情页显示简介（在网站信息下方）
  - 创建 `DescriptionItem` 方法用于显示多行文本简介
  - 在朗读内容和分享内容中包含简介信息
  - 已为所有9个国际组织添加了详细的简介内容

## [未发布]

### 新增功能 (Added)
- **国旗礼仪专题**：新增国旗礼仪与规范知识专题
  - 在专题列表中添加"国旗礼仪"专题，包含国旗在国际场合的使用规范和礼仪知识
  - 内容包括：升旗流程、悬挂顺序、悬挂方式、使用场合、礼仪规范、常见错误等6个部分
  - 专题详情页支持知识性内容展示，以滚动列表形式展示知识内容
  - 创建 `FlagEtiquetteData.ets` 数据文件，包含完整的国旗礼仪知识内容
  - 扩展专题系统，支持知识性专题（countryCodes为空数组时显示知识内容而非国旗列表）
- **国旗制作专题**：新增国旗制作知识专题
  - 在专题列表中添加"国旗制作"专题，包含国旗制作的完整知识体系
  - 内容包括：制作流程、制作材料、制作工艺、制作工厂、质量标准、制作成本等6个部分
  - 详细介绍国旗从设计到生产的全过程，包括材料选择、工艺技术、工厂资质等
  - 创建 `FlagManufacturingData.ets` 数据文件，包含完整的国旗制作知识内容
  - 优化知识性专题展示逻辑，支持多个知识性专题的展示
- **旗帜学专题**：新增旗帜学（国旗学）知识专题
  - 在专题列表中添加"旗帜学"专题，包含旗帜学的基础知识和研究方法
  - 内容包括：旗帜学概述、旗帜分类、设计原则、历史演变、研究方法、著名学者、旗帜象征等7个部分
  - 系统介绍旗帜学学科的定义、研究范围、分类体系、设计原则等核心内容
  - 创建 `FlagVexillologyData.ets` 数据文件，包含完整的旗帜学知识内容
  - 完善知识性专题系统，支持更多类型的知识内容展示
- **五星红旗历史专题**：新增五星红旗历史知识专题
  - 在专题列表中添加"五星红旗历史"专题，详细介绍五星红旗的历史
  - 内容包括：设计背景、设计过程、设计细节、首次升起、法律地位、使用规范、文化意义、历史演变等8个部分
  - 系统介绍五星红旗从设计到使用的完整历史，包括设计者曾联松、开国大典、国旗法等内容
  - 创建 `FlagHistoryData.ets` 数据文件，包含完整的五星红旗历史知识内容
  - 进一步扩展知识性专题系统，支持更多专题类型
- **蓝船旗专题**：新增蓝船旗（米字旗）专题
  - 在专题列表中添加"蓝船旗"专题，展示使用蓝船旗的英联邦国家
  - 蓝船旗来自英国的民用船旗，米字旗代表前英国殖民地，象征为英联邦成员
  - 包含国家：澳大利亚、新西兰、斐济、图瓦卢
  - 这些国家的国旗都包含英国米字旗（Union Jack）元素，体现其历史渊源
- **泛斯拉夫旗专题**：新增泛斯拉夫旗专题
  - 在专题列表中添加"泛斯拉夫旗"专题，展示采用泛斯拉夫色彩的国旗
  - 泛斯拉夫色彩为红、白、蓝三色，代表斯拉夫民族的团结
  - 包含国家：俄罗斯、塞尔维亚、斯洛伐克、斯洛文尼亚、克罗地亚、捷克
  - 这些国家的国旗都采用红、白、蓝三色组合，体现斯拉夫文化传统
- **泛中美洲联邦色旗专题**：新增泛中美洲联邦色旗专题
  - 在专题列表中添加"泛中美洲联邦色旗"专题，展示采用中美洲联邦色彩的国旗
  - 中美洲联邦国旗，蓝色代表加勒比海和太平洋，白色代表和平
  - 很多前中美洲联邦共和国的成员国采用这种色彩组合
  - 包含国家：萨尔瓦多、洪都拉斯、尼加拉瓜
  - 这些国家的国旗都采用蓝、白、蓝三色条纹设计，体现中美洲联邦的历史传统
- **泛米兰达色旗专题**：新增泛米兰达色旗专题
  - 在专题列表中添加"泛米兰达色旗"专题，展示采用米兰达色彩的国旗
  - 该旗为弗朗西斯科·德·米兰达于南美独立运动所用的旗帜
  - 其中红色代表南美洲，黄色代表西班牙，蓝色代表海
  - 后为前大哥伦比亚共和国的会员国采用
  - 包含国家：哥伦比亚、委内瑞拉、厄瓜多尔
  - 这些国家的国旗都采用黄、蓝、红三色组合，体现南美独立运动的历史渊源
- **相似旗专题**：新增相似旗专题
  - 在专题列表中添加"相似旗"专题，展示相似度较高的国旗
  - 一些国家的国旗相似度较高，仅在比例、颜色深度或细节上有所不同
  - 包含相似国旗组合：
    - 摩纳哥和印尼（红白横条，比例不同：4:5 vs 2:3）
    - 荷兰和卢森堡（红白蓝横条，比例和颜色深度不同）
    - 罗马尼亚和乍得（蓝黄红竖条，蓝色深度不同）
    - 中国和越南（红色底+五角星，星星数量不同）
    - 肯尼亚和南苏丹（色彩相似）
    - 安道尔和摩尔多瓦（竖条+徽章）
    - 伊朗和塔吉克斯坦（横条+徽章）
    - 爱尔兰和科特迪瓦（竖条，颜色顺序不同）
  - 包含国家：摩纳哥、印尼、荷兰、卢森堡、罗马尼亚、乍得、中国、越南、肯尼亚、南苏丹、安道尔、摩尔多瓦、伊朗、塔吉克斯坦、爱尔兰、科特迪瓦

### 优化 (Optimized)
- **专题页面滚动效果**：为专题列表页和专题详情页添加bounce滚动效果
  - 专题列表页（TopicListPage）的List组件添加Spring边缘效果
  - 专题详情页的国旗列表（FlagListView）使用Scroll包裹Grid，添加Spring边缘效果
  - 知识性专题内容列表已支持Spring边缘效果
- **文字类专题朗读功能**：为知识性专题添加朗读功能
  - 在专题详情页导航栏添加朗读按钮（仅知识性专题显示）
  - 支持朗读所有知识性专题内容，包括：国旗礼仪、国旗制作、旗帜学、五星红旗历史
  - 参考国旗详情页面的实现，使用TextReaderUtil进行文本朗读
  - 实现getReadContent方法，将所有章节内容组合为完整文本
  - 页面销毁时自动停止朗读，避免资源泄漏
  - 提供开始/停止朗读的交互反馈
- **国徽预下载和显示功能**：新增国徽预下载和显示功能
  - 创建 `scripts/download_coats_of_arms.js` 脚本，用于批量下载所有国家的国徽到media文件夹
  - 国徽文件保存为 `coat_of_arms_xx.svg` 格式（如 `coat_of_arms_cn.svg`），存储在 `entry/src/main/resources/base/media/` 目录
  - 创建 `coatOfArmsUtil.ets` 工具类，提供 `getCoatOfArmsImageSource()` 方法从media文件夹加载国徽资源
  - 在国旗详情页面顶部显示国徽（仅国家，不包括国际组织）
  - 国徽作为应用资源文件打包，无需运行时下载，提升加载速度
  - 使用 `$r('app.media.coat_of_arms_xx')` 方式引用国徽资源

### 调整 (Changed)
- **专题排序调整**：重新排序专题列表，文字类专题排在前面
  - 第一个：旗帜学
  - 第二个：国旗礼仪
  - 第三个：国旗制作
  - 第四个：五星红旗历史
  - 第五个：相似旗（特殊UI）
  - 其他专题按原有顺序排列
- **相似旗专题UI优化**：为相似旗专题创建独立UI展示
  - 每行显示两个相似国旗的组合
  - 顶部显示"xxx和xxx"的标题（如"摩纳哥和印尼"）
  - 两个国旗并排显示，点击可跳转到对应国旗详情页
  - 包含8组相似国旗：摩纳哥和印尼、荷兰和卢森堡、罗马尼亚和乍得、中国和越南、肯尼亚和南苏丹、安道尔和摩尔多瓦、伊朗和塔吉克斯坦、爱尔兰和科特迪瓦
  - 使用卡片式布局，提升视觉效果和用户体验

### 修复 (Fixed)
- **涂鸦游戏-美国州旗路径ID顺序修复**：修复多个美国州旗关卡无法完成的问题
  - 修正了得克萨斯州SVG文件中路径ID与颜色配置的对应关系
    - 调整了路径结构，使左侧竖条（蓝色）、右侧上半部分（白色）、右侧下半部分（红色）与颜色配置顺序匹配
  - 修正了爱荷华州SVG文件中路径ID顺序
    - 调整了路径结构，使左侧（蓝色）、中间（白色）、右侧（红色）与颜色配置顺序匹配
  - 修正了北卡罗来纳州SVG文件中路径ID顺序
    - 调整了路径结构，使左侧（蓝色）、上半部分（红色）、下半部分（白色）与颜色配置顺序匹配
  - 修正了田纳西州SVG文件中路径ID顺序
    - 添加了缺失的路径ID，使背景（红色）、右侧竖条（白色）、内部竖条（蓝色）与颜色配置顺序匹配
  - 修正了马萨诸塞州颜色配置
    - 更新颜色配置为两个颜色：白色（背景）和蓝色（中心盾牌）
    - SVG文件已包含正确的路径ID顺序（id="1"白色背景，id="2"蓝色中心）
  - 修正了俄亥俄州SVG文件中路径结构
    - 将右侧红色和白色条纹分开，使用group组织路径
    - id="1"包含所有红色部分（左侧三角形+右侧红色条纹）
    - id="2"包含蓝色中心圆形
    - 保持原有颜色配置不变：['BF0A30', 'FFFFFF', '002868']
  - 调整美国第4关配置
    - 从美国第4关移除俄亥俄州，现在只包含2个州旗：伊利诺伊州和密歇根州
  - 调整美国第5关配置
    - 从美国第5关移除北卡罗莱纳州，现在只包含2个州旗：佐治亚州和弗吉尼亚州
  - 调整美国第7关配置
    - 从美国第7关移除田纳西州，现在只包含2个州旗：印第安纳州和密苏里州
  - 调整美国第8关配置
    - 从美国第8关移除马里兰州，现在只包含2个州旗：威斯康星州和明尼苏达州
  - 修正明尼苏达州颜色配置和SVG路径结构
    - 添加白色背景和金色星星，现在包含三个颜色：蓝色、白色、金色
    - 颜色配置更新为：['001F5B', 'FFFFFF', 'FFD700']
    - 调整SVG路径ID顺序：id="1"蓝色三角形，id="2"白色背景，id="3"金色星星

## [1.0.7] - 2025-12-08

### 修复 (Fixed)
- **网络权限问题**：修复朗读功能选择官方声音（男声/女声）时提示"网络未连接"的问题
  - 在 `module.json5` 中添加 `ohos.permission.INTERNET` 网络权限
  - 添加网络权限使用说明字符串资源
  - 允许应用访问网络以下载语音模型和使用在线语音服务

### 优化 (Optimized)
- **涂鸦游戏暗黑模式**：优化涂鸦游戏在暗黑模式下的背景色
  - 暗黑模式下使用深黑色背景（#1C1C1E，非纯黑）
  - 浅色模式下保持灰色背景（#F5F6F7）
  - 根据系统主题自动切换背景色

## [未发布]

### 修复 (Fixed)
- **涂鸦游戏-美国州旗路径ID顺序修复**：修复多个美国州旗关卡无法完成的问题
  - 修正了得克萨斯州SVG文件中路径ID与颜色配置的对应关系
    - 调整了路径结构，使左侧竖条（蓝色）、右侧上半部分（白色）、右侧下半部分（红色）与颜色配置顺序匹配
  - 修正了爱荷华州SVG文件中路径ID顺序
    - 调整了路径结构，使左侧（蓝色）、中间（白色）、右侧（红色）与颜色配置顺序匹配
  - 修正了北卡罗来纳州SVG文件中路径ID顺序
    - 调整了路径结构，使左侧（蓝色）、上半部分（红色）、下半部分（白色）与颜色配置顺序匹配
  - 修正了田纳西州SVG文件中路径ID顺序
    - 添加了缺失的路径ID，使背景（红色）、右侧竖条（白色）、内部竖条（蓝色）与颜色配置顺序匹配

## [1.0.6] - 2025-12-08

### 新增功能 (Added)
- **HeadsUp 功能**：在探索页面新增 HeadsUp 游戏模式
  - 全屏显示，随机展示国旗
  - 点击屏幕查看答案，再次点击进入下一题
  - 每轮包含 10 个题目
  - 完成一轮后显示结束界面，可选择继续或退出
  - 支持多轮游戏，记录完成的轮数
- **专题新增**：在专题列表中添加太阳旗和星月旗专题
  - 太阳旗专题：包含 10 个国旗上绘有太阳图案的国家
  - 星月旗专题：包含 12 个国旗上绘有星月标志的国家

### 调整 (Changed)
- **专题顺序调整**：将太阳旗和星月旗专题移动到国旗上的动物专题之前
- **国旗上的动物专题**：从专题中移除玻利维亚、巴拉圭、秘鲁；添加塞尔维亚、黑山、埃及
- **涂鸦页面背景色优化**：涂鸦页面背景色固定为灰色（#F5F6F7），与页面背景色一致
- **国旗格式调整**：所有国家国旗统一使用SVG格式
  - 画廊页面和国旗详情页已支持PNG和SVG自动切换
  - 首页热门国旗和本周国旗已更新为支持PNG和SVG格式
  - 仅国际组织使用PNG格式，所有国家都使用SVG格式

### 优化 (Optimized)
- **专题详情页性能优化**：优化专题详情页列表渲染性能
  - 移除不必要的 setTimeout 延迟，改为同步加载数据
  - 使用 @Builder 提取 GridItem 内容，减少重复渲染
  - 为 ForEach 添加唯一 key 标识符，提升列表更新效率
  - 添加 Grid 缓存配置（cachedCount），提升滚动性能
  - 添加路由错误处理，提升稳定性

### 调整 (Changed)
- **关卡列表页UI调整**：移除所有关卡列表页中的emoji显示
  - 移除锁定状态的"🔒"emoji显示
  - 已解锁关卡仅显示箭头图标，未解锁关卡不显示任何图标
  - 涉及页面：看旗猜国名/看名猜国旗、知识问答、拼写挑战、记忆翻牌、假旗找茬

## [1.0.5] - 2025-12-08

### 代码审查 (Code Review)
- **全面代码审查**：重新进行了完整的代码审查和评测
  - 创建了 `CODE_REVIEW_2025-12-08.md` 完整审查报告
  - 审查范围：所有页面组件、工具类、数据管理和配置文件
  - 发现 8 个 Bug（高:2 中:4 低:2）
  - 发现 12 个优化建议（中:7 低:5）
  - 发现 3 个未完成功能（中:2 低:1）
  - 发现 10 个不一致性问题（低优先级）
  - 代码质量评分：3.5/5.0
  - 重点关注：定时器管理、资源清理、代码一致性

## [1.0.4] - 2025-12-08

### 新增功能 (Added)
- **州旗详情页朗读和分享功能**：为州旗详情页添加了朗读和分享功能
  - 在导航栏添加了朗读和分享按钮（参考国际组织详情页的设计）
  - 实现了 `onReadClick()` 方法，支持朗读州旗信息
  - 实现了 `onShareClick()` 方法，支持分享州旗信息到其他应用
  - 添加了 `getReadContent()` 方法，生成朗读内容
  - 添加了 `buildShareText()` 方法，生成分享文本
  - 朗读内容包括：州名、所属国家、首府、地区等信息
  - 分享内容包括：州名、所属国家、首府、地区等信息

### 修复 (Fixed)
- **编译错误修复**：修复了 ArkTS 编译错误
  - 修复了 `GameProgressManager.ets` 中 `throw` 语句的类型问题
  - 修复了 `ScreenshotManager.ets` 中 `throw` 语句的类型问题
  - ArkTS 要求 `throw` 必须是 `Error` 类型，已添加类型检查和转换

## [1.0.3] - 2025-12-08

### 代码审查 (Code Review)
- **全面代码审查**：完成了对整个项目的全面代码审查，生成了详细的审查报告
  - 创建了 `CODE_REVIEW_2025-12-08_FULL.md` 完整审查报告
  - 审查范围：所有页面组件、工具类、数据管理和配置文件
  - 发现 6 个 Bug（高:2 中:3 低:1）
  - 发现 15 个优化建议（中:8 低:7）
  - 发现 4 个未完成功能（中:3 低:1）
  - 发现 12 个不一致性问题（低优先级）
  - 提供了详细的修复建议和优先级分类
  - 代码质量评分：3.3/5

### 修复 (Fixed) - Bug 修复
- **FlagDetailPage doSaveFlag 缺少国际组织支持**：修复了保存国际组织旗帜时抛出错误的问题
  - `doSaveFlag()` 方法现在同时支持国家和国际组织
  - 修复后可以正常保存国际组织旗帜到相册

- **SaveFlagDialog 自动关闭时未释放 PixelMap**：修复了对话框自动关闭时 PixelMap 未释放的问题
  - 在 `handleClose()` 中确保调用 `onClose` 回调释放 PixelMap
  - 避免长时间使用导致的内存泄漏

- **MemoryPlayPage 定时器可能重复启动**：修复了定时器重复启动的问题
  - 在 `startTimer()` 中添加了检查，防止重复启动
  - 避免定时器重复执行导致的时间倒计时异常

- **GameProgressManager 初始化竞态条件**：修复了初始化失败后无法重试的问题
  - 在 `doInit` 失败时重置 `initPromise`，允许后续重试
  - 提升了初始化的健壮性

- **FavoritesManager 缺少错误重试机制**：改进了错误处理和重试逻辑
  - 在 `isFavorite()` 中添加了更好的错误处理和日志记录
  - 初始化失败后允许重试，提升用户体验

- **ScreenshotManager 文件描述符可能泄漏**：修复了文件描述符可能未正确关闭的问题
  - 使用更安全的资源管理模式，确保在所有情况下都能正确关闭文件描述符
  - 在写入成功后立即关闭，写入失败时也在 catch 中关闭
  - 避免大量保存操作导致文件描述符耗尽

### 优化 (Optimizations)
- **创建 PreferencesManager 减少重复初始化**：创建了统一的 Preferences 管理器
  - 新增 `PreferencesManager.ets` 工具类，提供统一的 Preferences 管理
  - 使用 Map 缓存已创建的 Preferences 实例，避免重复初始化
  - 更新了 `EntryAbility`、`ProfilePage` 和 `Index` 使用 PreferencesManager
  - 减少了 Preferences 的重复初始化，提升了性能和代码一致性

- **优化内存使用**：优化了 PixelMap 释放和大数组查找性能
  - 在 `FlagDetailPage.aboutToDisappear()` 中添加 PixelMap 释放，确保页面销毁时释放资源
  - 在 `onDownloadClick()` 中添加对话框关闭检查，避免重复创建对话框
  - 优化 `countryData.ets` 的查找性能：使用 Map 缓存替代数组查找（从 O(n) 优化到 O(1)）
  - 优化 `getCountryByCode()` 和 `getInternationalOrgByCode()` 的查找性能
  - 确保所有 PixelMap 在使用后正确释放，避免内存泄漏

### 修复 (Fixed)
- **ProfilePage 进度读取不一致**：修复了"我的"页面游戏进度显示始终为默认值1的问题
  - ProfilePage 现在使用 GameProgressManager 统一读取进度，而不是从错误的 preferences 文件读取
  - 修复后游戏进度能正确显示实际解锁的关卡数

- **FavoritesManager 初始化时序问题**：在 EntryAbility 中统一初始化收藏管理器和游戏进度管理器
  - 避免了在未初始化时调用导致的静默失败问题
  - 确保应用启动时所有管理器都已正确初始化

- **FlagDetailPage 内存泄漏风险**：修复了下载国旗时可能的内存泄漏
  - 在创建新的 PixelMap 之前先释放旧的 PixelMap
  - 避免用户多次点击下载导致的内存累积

- **TopicData 不存在的国家代码**：移除了北欧旗帜专题中不存在的国家代码
  - 移除了 'fo' (法罗群岛) 和 'ax' (奥兰群岛)，这些代码在 countryData 中不存在
  - 修复后专题详情页不再显示空白旗帜

- **PaintPlayPage 州旗图片路径**：修复了涂鸦游戏完成页面的州旗图片路径错误
  - LevelCompleteView 现在使用 getFlagImagePath() 方法获取正确的图片路径
  - 美国州旗正确使用 state_flags/us/ 目录

- **MemoryPlayPage timerId 类型**：修复了定时器 ID 类型不匹配的问题
  - 将 timerId 类型从 `number` 改为 `number | undefined`
  - 使用 `undefined` 替代 `-1` 作为未初始化状态

- **我的收藏入口无效**：修复了"我的"页面"我的收藏"菜单项点击无响应的问题
  - 添加了跳转到 FavoritesPage 的路由逻辑

- **下载图标深色模式不可见**：修复了下载图标在深色模式下不可见的问题
  - 创建了 `dark/media/icon_download.svg`，使用白色（#FFFFFF）描边

- **州旗详情页添加收藏和下载按钮**：优化了州旗详情页的用户体验
  - 在页面底部添加了收藏和下载按钮，与国旗详情页保持一致
  - 移除了顶部标题栏的下载按钮，简化界面
  - 收藏的州旗可以在"我的收藏"页面查看和跳转
  - 更新了 FavoritesPage 以支持州旗类型的收藏展示和导航

### 删除 (Removed)
- **清理财会相关未使用文件**：删除了与国旗小百科主题无关的财会工具页面和相关文件
  - 删除了 tools/ 目录下的所有37个财会工具页面（个税计算、五险一金、增值税、发票等）
  - 删除了 knowledge/ 目录下的知识库页面（内容为财会知识，与国旗无关）
  - 删除了 profile/ 目录下的 CityEditPage 和 InvoiceInfoPage
  - 删除了 components/ 目录下的 AmountInput 和 PageSeparatorSettings 组件
  - 删除了 utils/ 目录下的 cityData、invoiceInfoStore、knowledgeData、numberFormatter、pageSettings、provincesData 工具类
  - 更新了 main_pages.json，移除了已删除页面的路由配置
  - 更新了 FavoritesPage，移除了对知识库的依赖

## [1.0.2] - 2025-12-08

### 新增 (Added)
- **国旗涂鸦功能**：新增第三个Tab"涂鸦"，从 Flutter 项目移植国旗涂鸦游戏
  - `PaintGameData.ets` - 涂鸦游戏数据配置，包含国旗颜色信息和关卡配置
  - `PaintHomePage.ets` - 涂鸦首页，展示世界和各国州旗分类
  - `PaintPlayPage.ets` - 涂鸦游戏页面，使用 Web 组件加载 HTML 游戏
  - `paint_game.html` - HTML5 涂鸦游戏，支持颜色选择和区域填充
  - 支持分类：世界（20关）、美国、德国、意大利、巴西
  - 直接进入最新关卡，无需关卡选择页面
  - 每关包含3个国旗涂鸦任务
  - 支持提示功能（显示正确国旗参考）
  - 关卡进度自动保存

### 变更 (Changed)
- 更新 `Index.ets`：底部导航栏从4个Tab增加到5个Tab（首页、画廊、涂鸦、探索、我的）
- 更新 `GameProgressManager.ets`：新增涂鸦游戏类型枚举（PAINT_WORLD、PAINT_US等）
- 新增图标资源：`icon_tab_paint.svg`、`icon_tab_paint_selected.svg`、`icon_back.svg`、`icon_hint.svg`

## [1.0.1] - 2025-12-08

### 新增 (Added)
- **本周国旗功能**：首页新增"本周国旗"模块
  - `WeeklyFlagData.ets` - 每周国旗数据配置，包含最近10周的国庆日国旗
  - 根据当前周数自动展示对应国庆日的国家国旗
  - 展示国家名称、国庆日日期和描述
  - 点击可跳转至国旗详情页

## [1.0.0] - 2024-12-08

### 新增 (Added)
- **知识问答功能**：从 Flutter 项目移植知识问答游戏
  - `TriviaLevels.ets` - 关卡配置和问题数据（10关，每关10题）
  - `TriviaLevelsPage.ets` - 关卡选择页面
  - `TriviaPlayPage.ets` - 答题游戏页面
  - 问题类型涵盖国旗形状、颜色、图案、历史等趣味知识
  - 支持生命值系统、进度追踪、结果展示

- **专题功能**：新增国旗专题分类浏览
  - `TopicData.ets` - 专题数据配置
  - `TopicListPage.ets` - 专题列表页面
  - `TopicDetailPage.ets` - 专题详情页面（展示该专题下的所有国旗）
  - 内置专题：北欧旗帜、三色旗、泛阿拉伯旗帜、泛非洲旗帜、国旗上的动物
  - 首页添加专题推荐区域（横向滚动卡片）

### 重大变更 (Breaking Changes)
- **应用转型为国旗小百科**：将财会工具箱应用完全改造为国旗小百科应用
  - 更新应用名称为"国旗小百科"
  - 更新应用描述为"探索世界各国国旗的奥秘"
  - 更新底部导航栏：首页、画廊、探索、我的
  - 创建新的 GalleryPage（画廊页面）和 ExplorePage（探索页面）
  - 重写 HomePage 为国旗主题内容，包含：
    - 欢迎卡片（国旗小百科主题）
    - 快捷入口（全部国旗、按洲分类、国旗猜猜、收藏夹）
    - 热门国旗列表（中国、美国、日本、英国、法国）
    - 趣味小知识（10条国旗趣味知识）
  - 精简 ProfilePage，移除财会相关设置
  - 保留原有的颜色资源、工具类和应用结构

### 新增 (Added)
- **国旗画廊功能**：实现完整的国旗画廊页面
  - 从 flagame 项目复制了 195 个国家的国旗 SVG 文件到 `rawfile/flags/` 目录
  - 创建了 `countryData.ets` 数据文件，包含完整的国家信息（代码、中英文名称、首都、地区、人口、面积）
  - 实现洲际筛选功能：全部、亚洲、欧洲、非洲、美洲、大洋洲
  - 国旗网格展示（3列布局）
  - 点击国旗显示详情对话框，包含：国家名称、国旗大图、首都、地区、人口、面积
  - 人口和面积自动格式化显示（亿/万）

- **新增标签页图标**：使用 IconPark 图标包更新底部导航图标
  - 首页：home-two 图标
  - 画廊：picture-one 图标
  - 探索：compass-one 图标
  - 我的：user 图标
  - 每个图标都有普通（灰色 #8E8E93）和选中（蓝色 #1677FF + 浅蓝填充）两个版本
  - 同时创建了深色模式版本（普通白色，选中蓝色 + 深蓝填充）

---
